---
title: å‰ç«¯çŽ¯å¢ƒå®‰è£…
date: 2024-12-10 22:54:59
categories:
  - frontend
tags:
  - frontend
  - env
  - windows
---

## åºè¨€

> æœ¬æ–‡å®žåœ¨windowsçŽ¯å¢ƒä¸‹çš„å‰ç«¯çŽ¯å¢ƒé…ç½®

ç”±äºŽéœ€è¦åšä¸€äº›å‰ç«¯ç›¸å…³çš„é¡¹ç›®ï¼Œæ‰€ä»¥æœ¬æ–‡åˆ†äº«å‰ç«¯çŽ¯å¢ƒçš„å®‰è£…ä¸Žé…ç½®ã€‚

## nvm

> ps: å®‰è£…å‰éœ€è¦å¸è½½å·²å®‰è£…çš„nodeã€‚

ä½¿ç”¨ `nvm` æ¥ç®¡ç†å¤šä¸ª `nodejs` çš„å®‰è£…å’Œç‰ˆæœ¬åˆ‡æ¢ã€‚

- åœ¨å®˜ç½‘ä¸­ä¸‹è½½ [nvm-setup.exe](https://github.com/coreybutler/nvm-windows/releases)

ä¸‹è½½å®ŒæˆåŽï¼Œç›´æŽ¥åŒå‡»å®‰è£…å³å¯ï¼Œå®‰è£…çš„è¿‡ç¨‹ä¸­å¯ä»¥ä¿®æ”¹ `nvm` å’Œ `node` çš„å®‰è£…è·¯å¾„ï¼Œé»˜è®¤åœ¨ä¼šå®‰è£…åœ¨ `C` ç›˜ã€‚

- æ·»åŠ çŽ¯å¢ƒå˜é‡

é»˜è®¤ä¼šè‡ªåŠ¨åœ¨ç”¨æˆ·å˜é‡å’Œç³»ç»Ÿå˜é‡ä¸­æ·»åŠ çŽ¯å¢ƒ `NVM_HOME` å’Œ `NVM_SYMLINK` ï¼Œ `NVM_HOME` å¯¹åº”çš„å€¼æ˜¯æˆ‘ä»¬ `nvm` çš„å®‰è£…è·¯å¾„ `NVM_SYMLINK` å¯¹åº”çš„å€¼æ˜¯æˆ‘ä»¬ `nodejs` çš„å®‰è£…è·¯å¾„ï¼ˆè¿™ä¸¤ä¸ªè·¯å¾„å¯ä»¥åœ¨ä¸Šä¸€æ­¥å®‰è£… `nvm` çš„è¿‡ç¨‹ä¸­æ‰‹åŠ¨ä¿®æ”¹ï¼‰ã€‚

å¦‚æžœæ²¡æœ‰è‡ªåŠ¨æ·»åŠ çŽ¯å¢ƒå˜é‡ï¼Œåˆ™æ‰‹åŠ¨åœ¨ `æ­¤ç”µè„‘` -> `å³é”®å±žæ€§` -> `é«˜çº§ç³»ç»Ÿè®¾ç½®` -> `çŽ¯å¢ƒå˜é‡` ä¸­æ‰‹åŠ¨æ·»åŠ å³å¯ã€‚

- ä¿®æ”¹ `settings.text`

`settings.text` æ–‡ä»¶åœ¨ `nvm` çš„å®‰è£…è·¯å¾„æ–‡ä»¶å¤¹ä¸­ï¼Œä¸‹å…¥å¦‚ä¸‹ä¸¤è¡Œå³å¯ã€‚

~~~text
node_mirror: https://npmmirror.com/mirrors/node/
npm_mirror: https://npmmirror.com/mirrors/npm/
~~~

- æµ‹è¯•å®‰è£…

æ‰“å¼€ç»ˆç«¯æµ‹è¯• `nvm` æ˜¯å¦æ­£å¸¸å®‰è£…

~~~shell
PS C:\Users\11930> nvm

Running version 1.1.12.

Usage:

  nvm arch                     : Show if node is running in 32 or 64 bit mode.
  nvm current                  : Display active version.
  nvm debug                    : Check the NVM4W process for known problems (troubleshooter).
  nvm install <version> [arch] : The version can be a specific version, "latest" for the latest current version, or "lts" for the
                                 most recent LTS version. Optionally specify whether to install the 32 or 64 bit version (defaults
                                 to system arch). Set [arch] to "all" to install 32 AND 64 bit versions.
                                 Add --insecure to the end of this command to bypass SSL validation of the remote download server.
  nvm list [available]         : List the node.js installations. Type "available" at the end to see what can be installed. Aliased as ls.
  nvm on                       : Enable node.js version management.
  nvm off                      : Disable node.js version management.
  nvm proxy [url]              : Set a proxy to use for downloads. Leave [url] blank to see the current proxy.
                                 Set [url] to "none" to remove the proxy.
  nvm node_mirror [url]        : Set the node mirror. Defaults to https://nodejs.org/dist/. Leave [url] blank to use default url.
  nvm npm_mirror [url]         : Set the npm mirror. Defaults to https://github.com/npm/cli/archive/. Leave [url] blank to default url.
  nvm uninstall <version>      : The version must be a specific version.
  nvm use [version] [arch]     : Switch to use the specified version. Optionally use "latest", "lts", or "newest".
                                 "newest" is the latest installed version. Optionally specify 32/64bit architecture.
                                 nvm use <arch> will continue using the selected version, but switch to 32/64 bit mode.
  nvm root [path]              : Set the directory where nvm should store different versions of node.js.
                                 If <path> is not set, the current root will be displayed.
  nvm [--]version              : Displays the current running version of nvm for Windows. Aliased as v.
~~~

- æŸ¥è¯¢èƒ½å¤Ÿå®‰è£…çš„ `node` ç‰ˆæœ¬ï¼Œå¹¶å®‰è£…

~~~shell
# æŸ¥è¯¢å¯å®‰è£…çš„nodeç‰ˆæœ¬
PS C:\Users\11930> nvm list available

|   CURRENT    |     LTS      |  OLD STABLE  | OLD UNSTABLE |
|--------------|--------------|--------------|--------------|
|    23.3.0    |   22.12.0    |   0.12.18    |   0.11.16    |
|    23.2.0    |   22.11.0    |   0.12.17    |   0.11.15    |
|    23.1.0    |   20.18.1    |   0.12.16    |   0.11.14    |
|    23.0.0    |   20.18.0    |   0.12.15    |   0.11.13    |
|   22.10.0    |   20.17.0    |   0.12.14    |   0.11.12    |
|    22.9.0    |   20.16.0    |   0.12.13    |   0.11.11    |
|    22.8.0    |   20.15.1    |   0.12.12    |   0.11.10    |
|    22.7.0    |   20.15.0    |   0.12.11    |    0.11.9    |
|    22.6.0    |   20.14.0    |   0.12.10    |    0.11.8    |
|    22.5.1    |   20.13.1    |    0.12.9    |    0.11.7    |
|    22.5.0    |   20.13.0    |    0.12.8    |    0.11.6    |
|    22.4.1    |   20.12.2    |    0.12.7    |    0.11.5    |
|    22.4.0    |   20.12.1    |    0.12.6    |    0.11.4    |
|    22.3.0    |   20.12.0    |    0.12.5    |    0.11.3    |
|    22.2.0    |   20.11.1    |    0.12.4    |    0.11.2    |
|    22.1.0    |   20.11.0    |    0.12.3    |    0.11.1    |
|    22.0.0    |   20.10.0    |    0.12.2    |    0.11.0    |
|    21.7.3    |    20.9.0    |    0.12.1    |    0.9.12    |
|    21.7.2    |   18.20.5    |    0.12.0    |    0.9.11    |
|    21.7.1    |   18.20.4    |   0.10.48    |    0.9.10    |

This is a partial list. For a complete list, visit https://nodejs.org/en/download/releases

# ä¸‹è½½ 22.12.0 ç‰ˆæœ¬
PS C:\Users\11930> nvm install 22.12.0
Downloading node.js version 22.12.0 (64-bit)...
Extracting node and npm...
Complete
npm v10.9.0 installed successfully.


Installation complete. If you want to use this version, type

nvm use 22.12.0

# åˆ‡æ¢ç‰ˆæœ¬
PS C:\Users\11930> nvm use 22.12.0
Now using node v22.12.0 (64-bit)
PS C:\Users\11930> node -v
v22.12.0

# æŸ¥çœ‹å·²å®‰è£…ç‰ˆæœ¬
PS F:\frontend> nvm list

    22.12.0
  * 20.18.1 (Currently using 64-bit executable)
    18.20.5
~~~

## nrm

`npm` çš„é»˜è®¤æºå¯èƒ½ä¼šç‰¹åˆ«æ…¢æˆ–è€…è¶…æ—¶ï¼Œæ‰€ä»¥ä½¿ç”¨ `nrm` å·¥å…·æ¥ç®¡ç† `npm` æº

- æ‰‹åŠ¨åˆ‡æ¢æ·˜å® `npm` æº

å› ä¸º `nrm` ä¹Ÿéœ€è¦ç”¨ `npm install` å®‰è£…ï¼Œæ‰€ä»¥å…ˆæ‰‹åŠ¨ä¿®æ”¹æ·˜å®æºï¼Œå®‰è£… `nrm`

~~~shell
PS F:\frontend> npm install -g nrm

added 33 packages in 3s
~~~

- æŸ¥çœ‹å¯é€‰æº

~~~shell
# æ˜Ÿå·æ ‡è®°è¡Œè¡¨ç¤ºå½“å‰ä½¿ç”¨æº
PS F:\frontend> nrm ls
  npm ---------- https://registry.npmjs.org/
  yarn --------- https://registry.yarnpkg.com/
  tencent ------ https://mirrors.tencent.com/npm/
  cnpm --------- https://r.cnpmjs.org/
* taobao ------- https://registry.npmmirror.com/
  npmMirror ---- https://skimdb.npmjs.com/registry/
  huawei ------- https://repo.huaweicloud.com/repository/npm/
~~~

- åˆ‡æ¢æº

~~~shell
PS F:\frontend> nrm use npm
 SUCCESS  The registry has been changed to 'npm'.
PS F:\frontend> nrm ls
* npm ---------- https://registry.npmjs.org/
  yarn --------- https://registry.yarnpkg.com/
  tencent ------ https://mirrors.tencent.com/npm/
  cnpm --------- https://r.cnpmjs.org/
  taobao ------- https://registry.npmmirror.com/
  npmMirror ---- https://skimdb.npmjs.com/registry/
  huawei ------- https://repo.huaweicloud.com/repository/npm/
~~~

- å¢žåŠ æº

~~~shell
# nrm add {æºå registry} {æºçš„è·¯å¾„ url}
PS F:\frontend> nrm add npm2 http://npm2.org/
 SUCCESS  Add registry npm2 success, run nrm use npm2 command to use npm2 registry.
PS F:\frontend> nrm ls
  npm ---------- https://registry.npmjs.org/
  yarn --------- https://registry.yarnpkg.com/
  tencent ------ https://mirrors.tencent.com/npm/
  cnpm --------- https://r.cnpmjs.org/
* taobao ------- https://registry.npmmirror.com/
  npmMirror ---- https://skimdb.npmjs.com/registry/
  huawei ------- https://repo.huaweicloud.com/repository/npm/
  npm2 --------- http://npm2.org/
~~~

- åˆ é™¤æº

~~~shell
# nrm del {æºå registry}
PS F:\frontend> nrm del npm2
 SUCCESS  The registry 'npm2' has been deleted successfully.
PS F:\frontend> nrm ls
  npm ---------- https://registry.npmjs.org/
  yarn --------- https://registry.yarnpkg.com/
  tencent ------ https://mirrors.tencent.com/npm/
  cnpm --------- https://r.cnpmjs.org/
* taobao ------- https://registry.npmmirror.com/
  npmMirror ---- https://skimdb.npmjs.com/registry/
  huawei ------- https://repo.huaweicloud.com/repository/npm/
~~~

- æµ‹è¯•é€Ÿåº¦

~~~shell
# æµ‹è¯•æ‰€æœ‰æº
PS F:\frontend> nrm test
  npm ---------- 893 ms
  yarn --------- 828 ms
  tencent ------ 1087 ms
  cnpm --------- timeout (Fetch timeout over 5000 ms)
* taobao ------- 242 ms
  npmMirror ---- timeout (Fetch timeout over 5000 ms)
  huawei ------- 607 ms
~~~

## ä½¿ç”¨

æœ¬åœ°å°è¯•å®‰è£… `@tarojs/cli` å¹¶åˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®ã€‚

- å®‰è£… CLI å·¥å…·

~~~shell
PS F:\frontend> npm install -g @tarojs/cli
npm warn deprecated inflight@1.0.6: This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.
npm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
npm warn deprecated @humanwhocodes/config-array@0.11.14: Use @eslint/config-array instead
npm warn deprecated @humanwhocodes/object-schema@2.0.3: Use @eslint/object-schema instead
npm warn deprecated rimraf@3.0.2: Rimraf versions prior to v4 are no longer supported
npm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
npm warn deprecated @swc/register@0.1.10: Use @swc-node/register instead
npm warn deprecated eslint@8.41.0: This version is no longer supported. Please see https://eslint.org/version-support for other options.

added 458 packages in 30s
PS F:\frontend> taro -v
ðŸ‘½ Taro v4.0.8

4.0.8
~~~

- åˆå§‹åŒ–æœ¬åœ°é¡¹ç›®

~~~shell
# è¯¦ç»†çš„å®‰è£…æ–¹å¼è¯·æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œè¿™é‡Œåªåšæ¼”ç¤º
# æç¤ºå®‰è£…é¡¹ç›®ä¾èµ–å¤±è´¥ï¼Œcdåˆ°é¡¹ç›®æ›´ç›®å½•æ‰‹åŠ¨æ‰§è¡Œ npm install å³å¯
PS F:\frontend> taro init cfsthm_app
ðŸ‘½ Taro v4.0.8



Taro å³å°†åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®!
Need help? Go and open issue: https://tls.jd.com/taro-issue-helper

? è¯·è¾“å…¥é¡¹ç›®ä»‹ç»
? è¯·é€‰æ‹©æ¡†æž¶ React
? æ˜¯å¦éœ€è¦ä½¿ç”¨ TypeScript ï¼Ÿ Yes
? æ˜¯å¦éœ€è¦ç¼–è¯‘ä¸º ES5 ï¼Ÿ Yes
? è¯·é€‰æ‹© CSS é¢„å¤„ç†å™¨ï¼ˆSass/Less/Stylusï¼‰ Sass
? è¯·é€‰æ‹©åŒ…ç®¡ç†å·¥å…· npm
? è¯·é€‰æ‹©ç¼–è¯‘å·¥å…· Webpack5
? è¯·é€‰æ‹©æ¨¡æ¿æº Githubï¼ˆæœ€æ–°ï¼‰
âœ” æ‹‰å–è¿œç¨‹æ¨¡æ¿ä»“åº“æˆåŠŸï¼
? è¯·é€‰æ‹©æ¨¡æ¿ taro-uiï¼ˆä½¿ç”¨ taro-ui çš„æ¨¡æ¿ï¼‰

âœ” åˆ›å»ºé¡¹ç›®: cfsthm_app
âœ” åˆ›å»ºæ–‡ä»¶: F:\frontend\cfsthm_app\babel.config.js
âœ” åˆ›å»ºæ–‡ä»¶: F:\frontend\cfsthm_app\config/dev.ts
âœ” åˆ›å»ºæ–‡ä»¶: F:\frontend\cfsthm_app\config/index.ts
âœ” åˆ›å»ºæ–‡ä»¶: F:\frontend\cfsthm_app\config/prod.ts
âœ” åˆ›å»ºæ–‡ä»¶: F:\frontend\cfsthm_app\jest.config.ts
âœ” åˆ›å»ºæ–‡ä»¶: F:\frontend\cfsthm_app\package.json
âœ” åˆ›å»ºæ–‡ä»¶: F:\frontend\cfsthm_app\project.config.json
âœ” åˆ›å»ºæ–‡ä»¶: F:\frontend\cfsthm_app\project.tt.json
âœ” åˆ›å»ºæ–‡ä»¶: F:\frontend\cfsthm_app\src/app.config.ts
âœ” åˆ›å»ºæ–‡ä»¶: F:\frontend\cfsthm_app\src/app.scss
âœ” åˆ›å»ºæ–‡ä»¶: F:\frontend\cfsthm_app\src/app.ts
âœ” åˆ›å»ºæ–‡ä»¶: F:\frontend\cfsthm_app\src/index.html
âœ” åˆ›å»ºæ–‡ä»¶: F:\frontend\cfsthm_app\src/pages/index/index.config.ts
âœ” åˆ›å»ºæ–‡ä»¶: F:\frontend\cfsthm_app\src/pages/index/index.scss
âœ” åˆ›å»ºæ–‡ä»¶: F:\frontend\cfsthm_app\src/pages/index/index.tsx
âœ” åˆ›å»ºæ–‡ä»¶: F:\frontend\cfsthm_app\tsconfig.json
âœ” åˆ›å»ºæ–‡ä»¶: F:\frontend\cfsthm_app\types/global.d.ts
âœ” åˆ›å»ºæ–‡ä»¶: F:\frontend\cfsthm_app\.editorconfig
âœ” åˆ›å»ºæ–‡ä»¶: F:\frontend\cfsthm_app\.eslintrc
âœ” åˆ›å»ºæ–‡ä»¶: F:\frontend\cfsthm_app\.gitignore
âœ” åˆ›å»ºæ–‡ä»¶: F:\frontend\cfsthm_app\__tests__/index.test.js

âœ” åˆå§‹åŒ– git æˆåŠŸ
æ‰§è¡Œå®‰è£…é¡¹ç›®ä¾èµ– npm install, éœ€è¦ä¸€ä¼šå„¿...
âœ˜ å®‰è£…é¡¹ç›®ä¾èµ–å¤±è´¥ï¼Œè¯·è‡ªè¡Œé‡æ–°å®‰è£…ï¼
~~~

- æ‰‹åŠ¨å®‰è£…ä¾èµ–

æˆ‘è¿™é‡Œé‡åˆ°æŠ¥é”™ `Fix the upstream dependency conflict , or retry this command with --force or --legacy-peer-deps to accept an incorrect (and potentially broken) dependency resolution.`ï¼Œ ä½¿ç”¨ `npm install --force` é‡æ–°å®‰è£…å³å¯ã€‚

~~~shell
# cd åˆ°é¡¹ç›®æ ¹ç›®å½•
PS F:\frontend> cd .\cfsthm_app\
PS F:\frontend\cfsthm_app> npm install -force
npm warn using --force Recommended protections disabled.
npm warn ERESOLVE overriding peer dependency
npm warn While resolving: @tarojs/taro-loader@4.0.8
...
npm warn deprecated tslint@6.1.3: TSLint has been deprecated in favor of ESLint. Please see https://github.com/palantir/tslint/issues/4534 for more information.
npm warn deprecated core-js@2.6.12: core-js@<3.23.3 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Some versions have web compatibility issues. Please, upgrade your dependencies to the actual version of core-js.

added 2385 packages in 5m

273 packages are looking for funding
  run `npm fund` for details
~~~

è‡³æ­¤å‰ç«¯çš„æœ¬åœ°çŽ¯å¢ƒé…ç½®å®Œæ¯•ï¼ŒåŽç»­é¡¹ç›®çš„è¯¥å¯åŠ¨ä¸Žæµ‹è¯•å°±ä¸åšæ¼”ç¤ºäº†ï¼ŒæŸ¥çœ‹ `taro` [å®˜æ–¹æ–‡æ¡£](https://taro-docs.jd.com/docs/next/GETTING-STARTED)è¿›è¡Œæ“ä½œå³å¯ã€‚


